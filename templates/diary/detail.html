<!--meta.keys=["title", "entry", "formatDateOnly", "formatDateForDisplay", "nl2br"]-->
<% __this.stash.title = formatDateOnly(entry.id) + ' - 日記'; %>
<% wrapper('wrapper', () => { %>
    <style>
        .diary-nav { margin: 20px 0; }
        .diary-nav a { margin-right: 15px; color: #0066cc; text-decoration: none; }
        .diary-nav a:hover { text-decoration: underline; }
        .diary-detail { margin-bottom: 30px; }
        .diary-detail-date { font-weight: bold; color: #333; margin-bottom: 10px; font-size: 1.2em; }
        .diary-detail-body { white-space: pre-wrap; margin-bottom: 20px; line-height: 1.6; }
        .diary-detail-meta { font-size: 0.9em; color: #666; margin-bottom: 20px; }
        .diary-admin-links a { margin-right: 10px; color: #0066cc; }
    </style>

    <h1><a href="/diary">日記</a></h1>
    
    <div class="diary-nav">
        <a href="/diary">一覧に戻る</a>
        <a href="/diary/new">新規投稿</a>
    </div>

    <div class="diary-detail">
        <div class="diary-detail-date"><%= formatDateOnly(entry.id) %></div>
        <div class="diary-detail-body"><%=raw nl2br(entry.body) %></div>
        <div class="diary-detail-meta">
            作成: <%= formatDateForDisplay(entry.createdAt) %>
            <% if (entry.updatedAt !== entry.createdAt) { %>
                <br>更新: <%= formatDateForDisplay(entry.updatedAt) %>
            <% } %>
        </div>
        <div class="diary-admin-links">
            <a href="/diary/<%= entry.id %>/edit">編集</a>
        </div>
    </div>
<% }); /* end of wrapper */ %>